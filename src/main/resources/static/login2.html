<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">


  <title>Bracket Responsive Bootstrap3 Admin</title>

  <link href="css/style.default.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>

</head>

<body class="signin">





<section>
  
    <div class="signinpanel">
        
        <div class="row">
            
            <div class="col-md-7">
                
                <div class="signin-info">
                    <div class="logopanel">
                        <h1 style="font-size:50px"><span>[</span> 管理界面 <span>]</span></h1>
                    </div><!-- logopanel -->
                
                    <div class="mb20"></div>
                
                    <h5 style="font-size:15px"><strong>欢迎来到管理界面!</strong></h5>
                    <ul>
                        <li style="font-size:15px"><i class="fa fa-arrow-circle-o-right mr5"></i>解答疑问，寻求真相</li>
                        <li style="font-size:15px"><i class="fa fa-arrow-circle-o-right mr5"></i>不懂就来知晓</li>

                    </ul>

                </div><!-- signin0-info -->
            
            </div><!-- col-sm-7 -->
            
            <div class="col-md-5">
                
                <form method="post" action="index.html">
                    <h4 class="nomargin">登录</h4>
                    <p class="mt5 mb20">登录到您的账户</p>
                
                    <input type="text" class="form-control uname" id="email" name="user_id" />
                    <input type="password" class="form-control pword" id="password" name="user_passwd" />
                    <a href=""><small>不要忘记您的密码?</small></a>
                    <!--<button class="btn btn-success btn-block">登录</button>-->
                </form>
                     <div class="form-group-lg" id="app">
                     <button id="but2"  v-on:click="refreshMessage" class="btn btn-lg">登陆</button>
                      <button type="button"  class="btn btn-link btn-lg"><a href="/register.html">注册</a></button>
                     <label id="result"></label>
                      </div>

            </div><!-- col-sm-5 -->
        </div>
       
        </div>
</section>









<script>
    //vue
    new Vue({
            el: '#app',
            data: {
                message: 'Hello Vue!'
            },
            methods: {
                refreshMessage: function () {
                    var dataid = $("input#email").val();
                    var datapwd = $("input#password").val();
                    $.ajax({
                        url: '/AdminLogin',
                        type: 'POST', //GET
                        async: true,    //或false,是否异步
                        data: {
                            admin_id: dataid,
                            passwd: datapwd
                        },
                        timeout: 5000,    //超时时间
                        dataType: 'json',    //返回的数据格式：json/xml/html/script/jsonp/text
                        beforeSend: function (xhr) {
                            console.log(xhr);
                            console.log('发送前');
                        },
                        success: function (data, textStatus, jqXHR) {
                            if (data == 1) {
                                $("label#result").text("登陆成功");
                                window.location.href = "/";
                            }
                            if (data == -1) {
                                $("label#result").text("密码错误");
                            }
                            if (data == -2) {
                                $("label#result").text("没有此账户");
                            }
                        },
                        error: function (xhr, textStatus) {
                            console.log('错误');
                            console.log(xhr);
                            console.log(textStatus)
                        },
                        complete: function () {
                            console.log('结束');
                        }
                    })
                }
            }
        }
    )

</script>

</body>
</html>
